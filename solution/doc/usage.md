# Инструкция по использованию

## Обязательные требования

В целом, все сигнатуры эндпоинтов из обязательных требований идентичны OpenAPI спецификации, за исключением, разве что, добавления поле approved (статус модерации true/false) у кампании

## Опциональные требования

К сожалению, [go-swag](https://github.com/swaggo/swag) делали очень плохие люди и работает он криво, благо, описывать немного. Все параметры запроса ниже считать обязательными, если не сказано иначе

## Картинки

### POST /images/{campaignId}

Загрузить или обновить картинку

Request body:
Form data: image (file: image/png)

Коды ответов:

* 204 - все ок
* 400 - ошибка валидации или неподдерживаемый тип файла
* 500 - внутренняя ошибка сервера

### GET /images/{campaignId}

Получить картинку

Возвращает image/png

Коды ответов:

* 200 - все ок
* 404 - кампания не найдена
* 500 - внутренняя ошибка сервера

### DELETE /images/{campaignId}

Удалить картинку

Коды ответов:

* 204 - все ок
* 404 - кампания не найдена
* 500 - внутренняя ошибка сервера

## Moderation

### GET /moderation/campaigns

Получить кампании для модерации

Query параметры:

* Limit (int) (необязательный)
* Offset (int) (необязательный)

Response body:

```json
[
    {
        "id": "8203470a-b936-461d-b914-fbb97213a71f",
        "advertiser_id": "0194fa47-2245-78b4-a755-60e8f8874d74",
        "ad_title": "someTitle",
        "ad_text": "someText"
    }
]
```

Коды ответов:

* 200 - все ок
* 400 - ошибка валидации
* 500 - внутренняя ошибка сервера

### POST /moderation/campaigns/{campaignId}/approve

Одобрить кампанию

Коды ответов:

* 204 - все ок
* 400 - ошибка валидации
* 404 - кампания не найдена
* 500 - внутренняя ошибка сервера

### POST /moderation/campaigns/{campaignId}/reject

Отклонить кампанию

Коды ответов:

* 204 - все ок
* 400 - ошибка валидации
* 404 - кампания не найдена
* 500 - внутренняя ошибка сервера

## LLM

### POST /llm

Сгенерировать текст для рекламной кампании по заголовку и названию рекламодателя

Request body:

```json
{
    "campaign_title": "someTitle",
    "advertiser_name": "someName"
}
```

Response body:

```json
[
    {
        "campaign_text": "someText"
    }
]
```

Коды ответов:

* 200 - все ок
* 400 - ошибка валидации
* 500 - внутренняя ошибка сервера